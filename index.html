<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <title>Plataforma Educativa – Versión Sin Babel en Navegador</title>
  
  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React y ReactDOM (CDN UMD de desarrollo) -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- React Router DOM (v6, UMD) -->
  <script src="https://unpkg.com/react-router-dom@6/umd/react-router-dom.development.js"></script>
  <!-- PDF.js (CDN) -->
  <script src="https://unpkg.com/pdfjs-dist@3.3.122/build/pdf.min.js"></script>
  
  <!-- 
    NOTA IMPORTANTE:
    El siguiente script está pre-transpilado a JavaScript puro.
    No se usa type="text/babel". Tampoco se incluye Babel Standalone.
  -->
  <script>
/* TAILWIND CONFIG (opcional, para personalizar colores) */
if (typeof tailwind !== 'undefined' && tailwind.config) {
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          primary: "#000000",   // Negro
          secondary: "#ffffff", // Blanco
          accent: "#444444",    // Gris para resaltar
        },
      },
    },
  };
}

/********************************************************
 * Atajos para React y React Router
 ********************************************************/
var ReactRouterDOM = window.ReactRouterDOM;
var HashRouter = ReactRouterDOM.HashRouter;
var Routes = ReactRouterDOM.Routes;
var Route = ReactRouterDOM.Route;
var Link = ReactRouterDOM.Link;
var NavLink = ReactRouterDOM.NavLink;
var useNavigate = ReactRouterDOM.useNavigate;
var useParams = ReactRouterDOM.useParams;

/********************************************************
 * GLOBAL CONTEXT
 ********************************************************/
var GlobalContext = React.createContext();

function GlobalProvider(props) {
  var storedState = null;
  try {
    storedState = localStorage.getItem("eduAppData");
  } catch(e) {
    storedState = null;
  }
  var initialState = storedState ? JSON.parse(storedState) : {
    subjects: [
      {
        id: "matematicas",
        nombre: "Matemáticas",
        temas: [
          {
            id: "algebra",
            nombre: "Álgebra",
            pdfUrl: "algebra.pdf",
            explicacionesHTML: "<h2>Explicación de Álgebra</h2><p>Aquí iría el contenido HTML detallado...</p>"
          },
          {
            id: "geometria",
            nombre: "Geometría",
            pdfUrl: "geometria.pdf",
            explicacionesHTML: "<h2>Explicación de Geometría</h2><p>Contenido de geometría...</p>"
          }
        ]
      },
      {
        id: "historia",
        nombre: "Historia",
        temas: [
          {
            id: "edad-media",
            nombre: "Edad Media",
            pdfUrl: "edad-media.pdf",
            explicacionesHTML: "<h2>La Edad Media</h2><p>Contenido detallado de la Edad Media...</p>"
          }
        ]
      }
    ],
    favoritos: [],
    notas: [],
    preguntas: [
      {
        id: "q1",
        subjectId: "matematicas",
        temaId: "algebra",
        slideIndex: 0,
        text: "¿Cuál es el valor de x en la ecuación 2x = 10?",
        choices: ["x=2", "x=5", "x=10"],
        correctAnswerIndex: 1
      },
      {
        id: "q2",
        subjectId: "matematicas",
        temaId: "geometria",
        slideIndex: 2,
        text: "¿Cuál es la suma de los ángulos de un triángulo?",
        choices: ["180°", "360°", "90°"],
        correctAnswerIndex: 0
      }
    ],
    flashcards: [
      {
        id: "f1",
        subjectId: "matematicas",
        temaId: "algebra",
        front: "Ecuaciones lineales",
        back: "Las ecuaciones lineales tienen la forma ax + b = 0"
      }
    ],
    examenes: [],
    desempeno: {}
  };

  var _React$useState = React.useState(initialState),
      globalState = _React$useState[0],
      setGlobalState = _React$useState[1];

  React.useEffect(function () {
    try {
      localStorage.setItem("eduAppData", JSON.stringify(globalState));
    } catch(e){}
  }, [globalState]);

  return React.createElement(
    GlobalContext.Provider,
    { value: { globalState: globalState, setGlobalState: setGlobalState } },
    props.children
  );
}

function useGlobalContext() {
  return React.useContext(GlobalContext);
}

/********************************************************
 * COMPONENTE PRINCIPAL: App
 ********************************************************/
function App() {
  return React.createElement(
    HashRouter,
    null,
    React.createElement(
      "div",
      { className: "bg-secondary min-h-screen text-primary" },
      React.createElement(Header, null),
      React.createElement(
        Routes,
        null,
        React.createElement(Route, { path: "/", element: React.createElement(Home, null) }),
        React.createElement(Route, { path: "/subjects", element: React.createElement(Subjects, null) }),
        React.createElement(Route, { path: "/subjects/:subjectId", element: React.createElement(Temas, null) }),
        React.createElement(Route, { path: "/subjects/:subjectId/:temaId/slides", element: React.createElement(PDFSlidesView, null) }),
        React.createElement(Route, { path: "/favoritos", element: React.createElement(Favoritos, null) }),
        React.createElement(Route, { path: "/notas", element: React.createElement(Notas, null) }),
        React.createElement(Route, { path: "/preguntas", element: React.createElement(Preguntas, null) }),
        React.createElement(Route, { path: "/flashcards", element: React.createElement(Flashcards, null) }),
        React.createElement(Route, { path: "/examen", element: React.createElement(Examen, null) }),
        React.createElement(Route, { path: "/desempeno", element: React.createElement(Desempeno, null) })
      )
    )
  );
}

/********************************************************
 * COMPONENTE: HEADER
 ********************************************************/
function Header() {
  return React.createElement(
    "header",
    { className: "bg-primary text-secondary p-4 flex justify-between items-center" },
    React.createElement(
      Link,
      { to: "/", className: "font-bold text-xl" },
      "Plataforma Educativa"
    ),
    React.createElement(
      "nav",
      { className: "flex space-x-4" },
      React.createElement(
        NavLink,
        {
          to: "/subjects",
          className: function className(_ref) {
            var isActive = _ref.isActive;
            return isActive ? "font-bold underline" : "";
          }
        },
        "Asignaturas"
      ),
      React.createElement(
        NavLink,
        {
          to: "/favoritos",
          className: function className(_ref2) {
            var isActive = _ref2.isActive;
            return isActive ? "font-bold underline" : "";
          }
        },
        "Favoritos"
      ),
      React.createElement(
        NavLink,
        {
          to: "/notas",
          className: function className(_ref3) {
            var isActive = _ref3.isActive;
            return isActive ? "font-bold underline" : "";
          }
        },
        "Notas"
      ),
      React.createElement(
        NavLink,
        {
          to: "/preguntas",
          className: function className(_ref4) {
            var isActive = _ref4.isActive;
            return isActive ? "font-bold underline" : "";
          }
        },
        "Preguntas"
      ),
      React.createElement(
        NavLink,
        {
          to: "/flashcards",
          className: function className(_ref5) {
            var isActive = _ref5.isActive;
            return isActive ? "font-bold underline" : "";
          }
        },
        "Flashcards"
      ),
      React.createElement(
        NavLink,
        {
          to: "/examen",
          className: function className(_ref6) {
            var isActive = _ref6.isActive;
            return isActive ? "font-bold underline" : "";
          }
        },
        "Examen"
      ),
      React.createElement(
        NavLink,
        {
          to: "/desempeno",
          className: function className(_ref7) {
            var isActive = _ref7.isActive;
            return isActive ? "font-bold underline" : "";
          }
        },
        "Desempeño"
      )
    )
  );
}

/********************************************************
 * COMPONENTE: HOME
 ********************************************************/
function Home() {
  return React.createElement(
    "main",
    { className: "p-8 text-center" },
    React.createElement(
      "h1",
      { className: "text-3xl font-bold mb-4" },
      "Bienvenido a la Plataforma Educativa"
    ),
    React.createElement(
      "p",
      { className: "text-lg mb-8" },
      "Selecciona una asignatura y temática para empezar a estudiar."
    ),
    React.createElement(
      Link,
      { to: "/subjects", className: "bg-primary text-secondary px-4 py-2 rounded hover:bg-accent" },
      "Ir a Asignaturas"
    )
  );
}

/********************************************************
 * COMPONENTE: SUBJECTS
 ********************************************************/
function Subjects() {
  var _useGlobalContext = useGlobalContext(),
      globalState = _useGlobalContext.globalState;

  var subjects = globalState.subjects;
  return React.createElement(
    "section",
    { className: "p-8" },
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Asignaturas"
    ),
    React.createElement(
      "div",
      { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" },
      subjects.map(function (subj) {
        return React.createElement(
          Link,
          {
            key: subj.id,
            to: "/subjects/" + subj.id,
            className: "border border-primary rounded p-4 hover:bg-accent cursor-pointer"
          },
          React.createElement(
            "h3",
            { className: "text-xl font-semibold" },
            subj.nombre
          )
        );
      })
    )
  );
}

/********************************************************
 * COMPONENTE: TEMAS
 ********************************************************/
function Temas() {
  var _useParams = useParams(),
      subjectId = _useParams.subjectId;

  var _useGlobalContext2 = useGlobalContext(),
      globalState = _useGlobalContext2.globalState;

  var subject = globalState.subjects.find(function (s) {
    return s.id === subjectId;
  });
  if (!subject) {
    return React.createElement(
      "div",
      { className: "p-8" },
      "Asignatura no encontrada."
    );
  }
  return React.createElement(
    "section",
    { className: "p-8" },
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Tem\xE1ticas de ",
      subject.nombre
    ),
    React.createElement(
      "div",
      { className: "space-y-4" },
      subject.temas.map(function (tema) {
        return React.createElement(
          Link,
          {
            key: tema.id,
            to: "/subjects/" + subjectId + "/" + tema.id + "/slides",
            className: "block border border-primary p-4 rounded hover:bg-accent"
          },
          tema.nombre
        );
      })
    )
  );
}

/********************************************************
 * COMPONENTE: PDFSlidesView
 * Vista de diapositivas PDF con iconos tipo TikTok
 ********************************************************/
function PDFSlidesView() {
  var _useParams2 = useParams(),
      subjectId = _useParams2.subjectId,
      temaId = _useParams2.temaId;

  var _useGlobalContext3 = useGlobalContext(),
      globalState = _useGlobalContext3.globalState;

  var navigate = useNavigate();
  var subject = globalState.subjects.find(function (s) {
    return s.id === subjectId;
  });
  if (!subject) {
    return React.createElement(
      "div",
      { className: "p-8" },
      "Asignatura no encontrada."
    );
  }
  var tema = subject.temas.find(function (t) {
    return t.id === temaId;
  });
  if (!tema) {
    return React.createElement(
      "div",
      { className: "p-8" },
      "Tem\xE1tica no encontrada."
    );
  }

  // Manejo de PDF con PDF.js
  var _React$useState2 = React.useState(null),
      pdfDoc = _React$useState2[0],
      setPdfDoc = _React$useState2[1];

  var _React$useState3 = React.useState(1),
      currentPage = _React$useState3[0],
      setCurrentPage = _React$useState3[1];

  var _React$useState4 = React.useState(0),
      totalPages = _React$useState4[0],
      setTotalPages = _React$useState4[1];

  var _React$useState5 = React.useState(false),
      showExplanation = _React$useState5[0],
      setShowExplanation = _React$useState5[1];

  React.useEffect(function () {
    // Cargar PDF
    var loadingTask = pdfjsLib.getDocument(tema.pdfUrl);
    loadingTask.promise.then(function (doc) {
      setPdfDoc(doc);
      setTotalPages(doc.numPages);
    })["catch"](function () {
      // Error al cargar PDF
    });
  }, [tema.pdfUrl]);

  var canvasRef = React.useRef(null);

  React.useEffect(function () {
    if (!pdfDoc) return;
    var renderPage = function renderPage() {
      pdfDoc.getPage(currentPage).then(function (page) {
        var viewport = page.getViewport({ scale: 1.5 });
        var canvas = canvasRef.current;
        var context = canvas.getContext("2d");
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        var renderContext = {
          canvasContext: context,
          viewport: viewport
        };
        page.render(renderContext).promise.then(function () {});
      });
    };
    renderPage();
  }, [pdfDoc, currentPage]);

  var handlePreviousSlide = function handlePreviousSlide() {
    if (currentPage > 1) {
      setCurrentPage(currentPage - 1);
    }
  };
  var handleNextSlide = function handleNextSlide() {
    if (currentPage < totalPages) {
      setCurrentPage(currentPage + 1);
    }
  };

  return React.createElement(
    "div",
    { className: "relative w-full h-screen flex flex-col items-center bg-secondary" },
    React.createElement(
      "button",
      {
        onClick: function onClick() {
          return navigate(-1);
        },
        className: "absolute top-4 left-4 bg-primary text-secondary px-4 py-2 rounded"
      },
      "Volver"
    ),
    React.createElement(
      "div",
      { className: "absolute left-0 top-1/2 transform -translate-y-1/2 flex flex-col space-y-4 ml-2" },
      React.createElement(
        "button",
        {
          onClick: function onClick() {
            return setShowExplanation(!showExplanation);
          },
          className: "bg-primary text-secondary p-2 rounded"
        },
        "Explicaci\xF3n"
      ),
      React.createElement(FavoritaIcon, { subjectId: subjectId, temaId: temaId, slideIndex: currentPage - 1 }),
      React.createElement(NotasIcon, { subjectId: subjectId, temaId: temaId, slideIndex: currentPage - 1 }),
      React.createElement(PreguntasIcon, { subjectId: subjectId, temaId: temaId, slideIndex: currentPage - 1 }),
      React.createElement(FlashcardsIcon, { subjectId: subjectId, temaId: temaId, slideIndex: currentPage - 1 })
    ),
    showExplanation && React.createElement(
      "div",
      { className: "absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center" },
      React.createElement(
        "div",
        { className: "bg-secondary p-6 rounded shadow-lg max-w-2xl" },
        React.createElement(
          "button",
          {
            onClick: function onClick() {
              return setShowExplanation(false);
            },
            className: "bg-primary text-secondary px-2 py-1 rounded mb-2"
          },
          "Cerrar"
        ),
        React.createElement("div", {
          className: "text-primary",
          dangerouslySetInnerHTML: { __html: tema.explicacionesHTML }
        })
      )
    ),
    React.createElement(
      "div",
      { className: "flex-grow flex items-center justify-center" },
      React.createElement("canvas", { ref: canvasRef, className: "border border-primary" })
    ),
    React.createElement(
      "div",
      { className: "flex space-x-4 my-4" },
      React.createElement(
        "button",
        {
          onClick: handlePreviousSlide,
          disabled: currentPage === 1,
          className: "bg-primary text-secondary px-4 py-2 rounded disabled:opacity-50"
        },
        "Anterior"
      ),
      React.createElement(
        "span",
        { className: "text-primary" },
        "P\xE1gina ",
        currentPage,
        " de ",
        totalPages
      ),
      React.createElement(
        "button",
        {
          onClick: handleNextSlide,
          disabled: currentPage === totalPages,
          className: "bg-primary text-secondary px-4 py-2 rounded disabled:opacity-50"
        },
        "Siguiente"
      )
    )
  );
}

/********************************************************
 * ICONOS / BOTONES FUNCIONALES
 ********************************************************/

function FavoritaIcon(props) {
  var subjectId = props.subjectId,
      temaId = props.temaId,
      slideIndex = props.slideIndex;

  var _useGlobalContext4 = useGlobalContext(),
      globalState = _useGlobalContext4.globalState,
      setGlobalState = _useGlobalContext4.setGlobalState;

  var favoritos = globalState.favoritos;
  var isFavorito = favoritos.some(function (f) {
    return f.subjectId === subjectId && f.temaId === temaId && f.slideIndex === slideIndex;
  });
  var toggleFavorito = function toggleFavorito() {
    if (isFavorito) {
      // quitar de favoritos
      setGlobalState(function (prev) {
        return Object.assign({}, prev, {
          favoritos: prev.favoritos.filter(function (f) {
            return !(f.subjectId === subjectId && f.temaId === temaId && f.slideIndex === slideIndex);
          })
        });
      });
    } else {
      // agregar
      setGlobalState(function (prev) {
        return Object.assign({}, prev, {
          favoritos: prev.favoritos.concat([{
            subjectId: subjectId,
            temaId: temaId,
            slideIndex: slideIndex,
            addedAt: Date.now()
          }])
        });
      });
    }
  };
  return React.createElement(
    "button",
    {
      onClick: toggleFavorito,
      className: "p-2 rounded " + (isFavorito ? "bg-red-600 text-white" : "bg-primary text-secondary")
    },
    isFavorito ? "❤️" : "🤍"
  );
}

/* NOTAS ICON */
function NotasIcon(props) {
  var _React$useState6 = React.useState(false),
      showModal = _React$useState6[0],
      setShowModal = _React$useState6[1];

  return React.createElement(
    React.Fragment,
    null,
    React.createElement(
      "button",
      {
        onClick: function onClick() {
          return setShowModal(true);
        },
        className: "bg-primary text-secondary p-2 rounded"
      },
      "\uD83D\uDCDD"
    ),
    showModal && React.createElement(NotasModal, {
      subjectId: props.subjectId,
      temaId: props.temaId,
      slideIndex: props.slideIndex,
      onClose: function onClose() {
        return setShowModal(false);
      }
    })
  );
}

function NotasModal(props) {
  var subjectId = props.subjectId,
      temaId = props.temaId,
      slideIndex = props.slideIndex,
      onClose = props.onClose;

  var _useGlobalContext5 = useGlobalContext(),
      globalState = _useGlobalContext5.globalState,
      setGlobalState = _useGlobalContext5.setGlobalState;

  var _React$useState7 = React.useState(""),
      nota = _React$useState7[0],
      setNota = _React$useState7[1];

  React.useEffect(function () {
    var existingNote = globalState.notas.find(function (n) {
      return n.subjectId === subjectId && n.temaId === temaId && n.slideIndex === slideIndex;
    });
    if (existingNote) {
      setNota(existingNote.text);
    } else {
      setNota("");
    }
  }, [subjectId, temaId, slideIndex, globalState.notas]);

  var saveNote = function saveNote() {
    setGlobalState(function (prev) {
      var existingIndex = prev.notas.findIndex(function (n) {
        return n.subjectId === subjectId && n.temaId === temaId && n.slideIndex === slideIndex;
      });
      if (existingIndex >= 0) {
        var updatedNotes = prev.notas.slice();
        updatedNotes[existingIndex] = Object.assign({}, updatedNotes[existingIndex], {
          text: nota
        });
        return Object.assign({}, prev, { notas: updatedNotes });
      } else {
        return Object.assign({}, prev, {
          notas: prev.notas.concat([{
            subjectId: subjectId,
            temaId: temaId,
            slideIndex: slideIndex,
            text: nota
          }])
        });
      }
    });
    onClose();
  };

  return React.createElement(
    "div",
    { className: "absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center" },
    React.createElement(
      "div",
      { className: "bg-secondary p-6 rounded shadow-lg max-w-xl w-full" },
      React.createElement(
        "h3",
        { className: "text-xl font-bold mb-2" },
        "Notas"
      ),
      React.createElement("textarea", {
        className: "w-full p-2 border border-primary rounded mb-4 text-primary",
        rows: 6,
        value: nota,
        onChange: function onChange(e) {
          return setNota(e.target.value);
        }
      }),
      React.createElement(
        "div",
        { className: "flex justify-end space-x-2" },
        React.createElement(
          "button",
          {
            onClick: onClose,
            className: "bg-accent text-secondary px-4 py-2 rounded"
          },
          "Cancelar"
        ),
        React.createElement(
          "button",
          {
            onClick: saveNote,
            className: "bg-primary text-secondary px-4 py-2 rounded"
          },
          "Guardar"
        )
      )
    )
  );
}

/* PREGUNTAS ICON */
function PreguntasIcon(props) {
  var _React$useState8 = React.useState(false),
      showModal = _React$useState8[0],
      setShowModal = _React$useState8[1];

  return React.createElement(
    React.Fragment,
    null,
    React.createElement(
      "button",
      {
        onClick: function onClick() {
          return setShowModal(true);
        },
        className: "bg-primary text-secondary p-2 rounded"
      },
      "\u2753"
    ),
    showModal && React.createElement(PreguntasModal, {
      subjectId: props.subjectId,
      temaId: props.temaId,
      slideIndex: props.slideIndex,
      onClose: function onClose() {
        return setShowModal(false);
      }
    })
  );
}

function PreguntasModal(props) {
  var subjectId = props.subjectId,
      temaId = props.temaId,
      slideIndex = props.slideIndex,
      onClose = props.onClose;

  var _useGlobalContext6 = useGlobalContext(),
      globalState = _useGlobalContext6.globalState;

  var preguntas = globalState.preguntas.filter(function (q) {
    return q.subjectId === subjectId && q.temaId === temaId && q.slideIndex === slideIndex;
  });
  if (preguntas.length === 0) {
    return React.createElement(
      "div",
      { className: "absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center" },
      React.createElement(
        "div",
        { className: "bg-secondary p-6 rounded shadow-lg max-w-xl w-full" },
        React.createElement(
          "button",
          {
            onClick: onClose,
            className: "bg-primary text-secondary px-2 py-1 rounded mb-2"
          },
          "Cerrar"
        ),
        React.createElement(
          "p",
          { className: "text-primary" },
          "No hay preguntas para esta diapositiva."
        )
      )
    );
  }
  return React.createElement(
    "div",
    { className: "absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center" },
    React.createElement(
      "div",
      { className: "bg-secondary p-6 rounded shadow-lg max-w-xl w-full" },
      React.createElement(
        "button",
        {
          onClick: onClose,
          className: "bg-primary text-secondary px-2 py-1 rounded mb-4"
        },
        "Cerrar"
      ),
      preguntas.map(function (q) {
        return React.createElement(PreguntaItem, { key: q.id, pregunta: q });
      })
    )
  );
}

function PreguntaItem(props) {
  var pregunta = props.pregunta;
  var text = pregunta.text,
      choices = pregunta.choices,
      correctAnswerIndex = pregunta.correctAnswerIndex;

  var _React$useState9 = React.useState(null),
      selected = _React$useState9[0],
      setSelected = _React$useState9[1];

  var _React$useState10 = React.useState(""),
      feedback = _React$useState10[0],
      setFeedback = _React$useState10[1];

  var verificarRespuesta = function verificarRespuesta() {
    if (selected === correctAnswerIndex) {
      setFeedback("¡Correcto!");
    } else {
      setFeedback("Respuesta Incorrecta");
    }
  };
  return React.createElement(
    "div",
    { className: "mb-4 border-b border-primary pb-4" },
    React.createElement(
      "p",
      { className: "font-bold mb-2 text-primary" },
      text
    ),
    React.createElement(
      "div",
      { className: "flex flex-col space-y-2" },
      choices.map(function (c, idx) {
        return React.createElement(
          "label",
          { key: idx, className: "flex items-center space-x-2 text-primary" },
          React.createElement("input", {
            type: "radio",
            name: text,
            checked: selected === idx,
            onChange: function onChange() {
              return setSelected(idx);
            }
          }),
          React.createElement(
            "span",
            null,
            c
          )
        );
      })
    ),
    React.createElement(
      "button",
      { onClick: verificarRespuesta, className: "mt-2 bg-primary text-secondary px-4 py-1 rounded" },
      "Verificar"
    ),
    feedback && React.createElement(
      "p",
      { className: "mt-2" },
      feedback
    )
  );
}

/* FLASHCARDS ICON */
function FlashcardsIcon(props) {
  var _React$useState11 = React.useState(false),
      showModal = _React$useState11[0],
      setShowModal = _React$useState11[1];

  return React.createElement(
    React.Fragment,
    null,
    React.createElement(
      "button",
      {
        onClick: function onClick() {
          return setShowModal(true);
        },
        className: "bg-primary text-secondary p-2 rounded"
      },
      "\uD83D\uDCA1"
    ),
    showModal && React.createElement(FlashcardsModal, {
      subjectId: props.subjectId,
      temaId: props.temaId,
      slideIndex: props.slideIndex,
      onClose: function onClose() {
        return setShowModal(false);
      }
    })
  );
}

function FlashcardsModal(props) {
  var subjectId = props.subjectId,
      temaId = props.temaId,
      slideIndex = props.slideIndex,
      onClose = props.onClose;

  var _useGlobalContext7 = useGlobalContext(),
      globalState = _useGlobalContext7.globalState,
      setGlobalState = _useGlobalContext7.setGlobalState;

  var _React$useState12 = React.useState(""),
      front = _React$useState12[0],
      setFront = _React$useState12[1];

  var _React$useState13 = React.useState(""),
      back = _React$useState13[0],
      setBack = _React$useState13[1];

  var _React$useState14 = React.useState(""),
      createdMsg = _React$useState14[0],
      setCreatedMsg = _React$useState14[1];

  var createFlashcard = function createFlashcard() {
    if (front.trim() && back.trim()) {
      setGlobalState(function (prev) {
        return Object.assign({}, prev, {
          flashcards: prev.flashcards.concat([{
            id: "fc_" + Date.now(),
            subjectId: subjectId,
            temaId: temaId,
            slideIndex: slideIndex,
            front: front,
            back: back
          }])
        });
      });
      setCreatedMsg("Flashcard creada correctamente.");
      setFront("");
      setBack("");
    }
  };

  return React.createElement(
    "div",
    { className: "absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center" },
    React.createElement(
      "div",
      { className: "bg-secondary p-6 rounded shadow-lg max-w-xl w-full" },
      React.createElement(
        "button",
        {
          onClick: onClose,
          className: "bg-primary text-secondary px-2 py-1 rounded mb-4"
        },
        "Cerrar"
      ),
      React.createElement(
        "h3",
        { className: "text-xl font-bold mb-2 text-primary" },
        "Crear Flashcard"
      ),
      React.createElement(
        "div",
        { className: "mb-2" },
        React.createElement(
          "label",
          { className: "block text-primary font-semibold mb-1" },
          "Front:"
        ),
        React.createElement("input", {
          type: "text",
          className: "w-full p-2 border border-primary rounded text-primary",
          value: front,
          onChange: function onChange(e) {
            return setFront(e.target.value);
          }
        })
      ),
      React.createElement(
        "div",
        { className: "mb-2" },
        React.createElement(
          "label",
          { className: "block text-primary font-semibold mb-1" },
          "Back:"
        ),
        React.createElement("input", {
          type: "text",
          className: "w-full p-2 border border-primary rounded text-primary",
          value: back,
          onChange: function onChange(e) {
            return setBack(e.target.value);
          }
        })
      ),
      React.createElement(
        "button",
        {
          onClick: createFlashcard,
          className: "bg-primary text-secondary px-4 py-2 rounded"
        },
        "Guardar"
      ),
      createdMsg && React.createElement(
        "p",
        { className: "text-green-600 mt-2" },
        createdMsg
      )
    )
  );
}

/********************************************************
 * FAVORITOS
 ********************************************************/
function Favoritos() {
  var _useGlobalContext8 = useGlobalContext(),
      globalState = _useGlobalContext8.globalState;

  var favoritos = globalState.favoritos,
      subjects = globalState.subjects;

  var getSubjectName = function getSubjectName(id) {
    var subj = subjects.find(function (s) {
      return s.id === id;
    });
    return subj ? subj.nombre : "Desconocido";
  };
  var getTemaName = function getTemaName(subjectId, temaId) {
    var subj = subjects.find(function (s) {
      return s.id === subjectId;
    });
    if (!subj) return "Desconocido";
    var tema = subj.temas.find(function (t) {
      return t.id === temaId;
    });
    return tema ? tema.nombre : "Desconocido";
  };

  return React.createElement(
    "section",
    { className: "p-8" },
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Diapositivas Favoritas"
    ),
    favoritos.length === 0 ? React.createElement(
      "p",
      null,
      "No hay diapositivas favoritas a\xFAn."
    ) : React.createElement(
      "ul",
      { className: "space-y-2" },
      favoritos.map(function (fav, idx) {
        return React.createElement(
          "li",
          { key: idx, className: "border p-2 rounded" },
          getSubjectName(fav.subjectId),
          " - ",
          getTemaName(fav.subjectId, fav.temaId),
          " - Diapositiva ",
          fav.slideIndex + 1
        );
      })
    )
  );
}

/********************************************************
 * NOTAS
 ********************************************************/
function Notas() {
  var _useGlobalContext9 = useGlobalContext(),
      globalState = _useGlobalContext9.globalState;

  var notas = globalState.notas,
      subjects = globalState.subjects;
  var agrupadas = {};

  notas.forEach(function (n) {
    var subj = n.subjectId;
    var tema = n.temaId;
    if (!agrupadas[subj]) agrupadas[subj] = {};
    if (!agrupadas[subj][tema]) agrupadas[subj][tema] = [];
    agrupadas[subj][tema].push(n);
  });

  var getSubjectName = function getSubjectName(id) {
    var subj = subjects.find(function (s) {
      return s.id === id;
    });
    return subj ? subj.nombre : "Desconocido";
  };
  var getTemaName = function getTemaName(subjectId, temaId) {
    var subj = subjects.find(function (s) {
      return s.id === subjectId;
    });
    if (!subj) return "Desconocido";
    var tema = subj.temas.find(function (t) {
      return t.id === temaId;
    });
    return tema ? tema.nombre : "Desconocido";
  };

  var keysSubj = Object.keys(agrupadas);

  return React.createElement(
    "section",
    { className: "p-8" },
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Notas Guardadas"
    ),
    keysSubj.length === 0 ? React.createElement(
      "p",
      null,
      "No hay notas guardadas."
    ) : keysSubj.map(function (subj) {
      var temasObj = agrupadas[subj];
      var temaKeys = Object.keys(temasObj);
      return React.createElement(
        "div",
        { key: subj, className: "mb-4" },
        React.createElement(
          "h3",
          { className: "text-xl font-semibold mb-2" },
          getSubjectName(subj)
        ),
        temaKeys.map(function (tema) {
          var notesArr = temasObj[tema];
          return React.createElement(
            "div",
            { key: tema, className: "ml-4 mb-2" },
            React.createElement(
              "h4",
              { className: "font-semibold" },
              getTemaName(subj, tema)
            ),
            React.createElement(
              "ul",
              { className: "ml-4 list-disc" },
              notesArr.map(function (nota, idx) {
                return React.createElement(
                  "li",
                  { key: idx, className: "mb-2" },
                  React.createElement(
                    "strong",
                    null,
                    "Diapositiva ",
                    nota.slideIndex + 1,
                    ":"
                  ),
                  " ",
                  nota.text
                );
              })
            )
          );
        })
      );
    })
  );
}

/********************************************************
 * PREGUNTAS
 ********************************************************/
function Preguntas() {
  var _useGlobalContext10 = useGlobalContext(),
      globalState = _useGlobalContext10.globalState;

  var preguntas = globalState.preguntas,
      subjects = globalState.subjects;
  var agrupadas = {};

  preguntas.forEach(function (p) {
    if (!agrupadas[p.subjectId]) agrupadas[p.subjectId] = {};
    if (!agrupadas[p.subjectId][p.temaId]) agrupadas[p.subjectId][p.temaId] = [];
    agrupadas[p.subjectId][p.temaId].push(p);
  });

  var getSubjectName = function getSubjectName(id) {
    var subj = subjects.find(function (s) {
      return s.id === id;
    });
    return subj ? subj.nombre : "Desconocido";
  };
  var getTemaName = function getTemaName(subjectId, temaId) {
    var subj = subjects.find(function (s) {
      return s.id === subjectId;
    });
    if (!subj) return "Desconocido";
    var tema = subj.temas.find(function (t) {
      return t.id === temaId;
    });
    return tema ? tema.nombre : "Desconocido";
  };

  var subjKeys = Object.keys(agrupadas);

  return React.createElement(
    "section",
    { className: "p-8" },
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Banco de Preguntas"
    ),
    subjKeys.length === 0 ? React.createElement(
      "p",
      null,
      "No hay preguntas almacenadas."
    ) : subjKeys.map(function (subj) {
      var temaObj = agrupadas[subj];
      var temaKeys = Object.keys(temaObj);
      return React.createElement(
        "div",
        { key: subj, className: "mb-4" },
        React.createElement(
          "h3",
          { className: "text-xl font-semibold mb-2" },
          getSubjectName(subj)
        ),
        temaKeys.map(function (tema) {
          var questionArr = temaObj[tema];
          return React.createElement(
            "div",
            { key: tema, className: "ml-4 mb-2" },
            React.createElement(
              "h4",
              { className: "font-semibold" },
              getTemaName(subj, tema)
            ),
            questionArr.map(function (q) {
              return React.createElement(PreguntaItem, { key: q.id, pregunta: q });
            })
          );
        })
      );
    })
  );
}

/********************************************************
 * FLASHCARDS
 ********************************************************/
function Flashcards() {
  var _useGlobalContext11 = useGlobalContext(),
      globalState = _useGlobalContext11.globalState;

  var flashcards = globalState.flashcards,
      subjects = globalState.subjects;
  var agrupadas = {};

  flashcards.forEach(function (fc) {
    if (!agrupadas[fc.subjectId]) agrupadas[fc.subjectId] = {};
    if (!agrupadas[fc.subjectId][fc.temaId]) agrupadas[fc.subjectId][fc.temaId] = [];
    agrupadas[fc.subjectId][fc.temaId].push(fc);
  });

  var getSubjectName = function getSubjectName(id) {
    var subj = subjects.find(function (s) {
      return s.id === id;
    });
    return subj ? subj.nombre : "Desconocido";
  };
  var getTemaName = function getTemaName(subjectId, temaId) {
    var subj = subjects.find(function (s) {
      return s.id === subjectId;
    });
    if (!subj) return "Desconocido";
    var tema = subj.temas.find(function (t) {
      return t.id === temaId;
    });
    return tema ? tema.nombre : "Desconocido";
  };

  var subjKeys = Object.keys(agrupadas);

  return React.createElement(
    "section",
    { className: "p-8" },
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Colecci\xF3n de Flashcards"
    ),
    subjKeys.length === 0 ? React.createElement(
      "p",
      null,
      "No hay flashcards creadas."
    ) : subjKeys.map(function (subj) {
      var temaObj = agrupadas[subj];
      var temaKeys = Object.keys(temaObj);
      return React.createElement(
        "div",
        { key: subj, className: "mb-4" },
        React.createElement(
          "h3",
          { className: "text-xl font-semibold mb-2" },
          getSubjectName(subj)
        ),
        temaKeys.map(function (tema) {
          var fcArr = temaObj[tema];
          return React.createElement(
            "div",
            { key: tema, className: "ml-4 mb-2" },
            React.createElement(
              "h4",
              { className: "font-semibold" },
              getTemaName(subj, tema)
            ),
            React.createElement(
              "div",
              { className: "flex flex-wrap gap-4" },
              fcArr.map(function (fc) {
                return React.createElement(FlashcardItem, { key: fc.id, flashcard: fc });
              })
            )
          );
        })
      );
    })
  );
}

function FlashcardItem(props) {
  var _React$useState15 = React.useState(false),
      flipped = _React$useState15[0],
      setFlipped = _React$useState15[1];

  React.useEffect(function () {
    var interval = setInterval(function () {
      setFlipped(function (prev) {
        return !prev;
      });
    }, 3000);
    return function () {
      clearInterval(interval);
    };
  }, []);

  return React.createElement(
    "div",
    {
      className: "w-40 h-40 border border-primary relative perspective cursor-pointer"
    },
    React.createElement(
      "div",
      {
        className: "absolute w-full h-full transition-transform duration-500 " + (flipped ? "rotate-y-180" : "")
      },
      React.createElement(
        "div",
        { className: "bg-accent text-secondary w-full h-full flex items-center justify-center backface-hidden" },
        props.flashcard.front
      ),
      React.createElement(
        "div",
        { className: "bg-primary text-secondary w-full h-full flex items-center justify-center rotate-y-180 backface-hidden absolute top-0 left-0" },
        props.flashcard.back
      )
    )
  );
}

/********************************************************
 * EXAMEN
 ********************************************************/
function Examen() {
  var _useGlobalContext12 = useGlobalContext(),
      globalState = _useGlobalContext12.globalState;

  var preguntas = globalState.preguntas,
      subjects = globalState.subjects;

  var _React$useState16 = React.useState(""),
      selectedSubject = _React$useState16[0],
      setSelectedSubject = _React$useState16[1];

  var _React$useState17 = React.useState(""),
      selectedTema = _React$useState17[0],
      setSelectedTema = _React$useState17[1];

  var _React$useState18 = React.useState([]),
      examenPreguntas = _React$useState18[0],
      setExamenPreguntas = _React$useState18[1];

  var handleGenerarExamen = function handleGenerarExamen() {
    var filtered = preguntas.filter(function (p) {
      if (selectedSubject && p.subjectId !== selectedSubject) return false;
      if (selectedTema && p.temaId !== selectedTema) return false;
      return true;
    });
    setExamenPreguntas(filtered);
  };

  var _React$useState19 = React.useState(0),
      tiempo = _React$useState19[0],
      setTiempo = _React$useState19[1];

  var _React$useState20 = React.useState(false),
      corriendo = _React$useState20[0],
      setCorriendo = _React$useState20[1];

  React.useEffect(function () {
    var interval = null;
    if (corriendo) {
      interval = setInterval(function () {
        setTiempo(function (prev) {
          return prev + 1;
        });
      }, 1000);
    }
    return function () {
      if (interval) clearInterval(interval);
    };
  }, [corriendo]);

  var startSimulation = function startSimulation() {
    setTiempo(0);
    setCorriendo(true);
  };
  var stopSimulation = function stopSimulation() {
    setCorriendo(false);
  };

  return React.createElement(
    "section",
    { className: "p-8" },
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Generador de Ex\xE1menes"
    ),
    React.createElement(
      "div",
      { className: "border border-primary p-4 mb-4 rounded" },
      React.createElement(
        "h3",
        { className: "font-semibold mb-2 text-primary" },
        "Seleccionar preguntas"
      ),
      React.createElement(
        "div",
        { className: "mb-2" },
        React.createElement(
          "label",
          { className: "block" },
          "Asignatura:"
        ),
        React.createElement(
          "select",
          {
            className: "border p-1 rounded",
            value: selectedSubject,
            onChange: function onChange(e) {
              setSelectedSubject(e.target.value);
              setSelectedTema("");
            }
          },
          React.createElement(
            "option",
            { value: "" },
            "Todas"
          ),
          subjects.map(function (s) {
            return React.createElement(
              "option",
              { key: s.id, value: s.id },
              s.nombre
            );
          })
        )
      ),
      selectedSubject && React.createElement(
        "div",
        { className: "mb-2" },
        React.createElement(
          "label",
          { className: "block" },
          "Tema:"
        ),
        React.createElement(
          "select",
          {
            className: "border p-1 rounded",
            value: selectedTema,
            onChange: function onChange(e) {
              return setSelectedTema(e.target.value);
            }
          },
          React.createElement(
            "option",
            { value: "" },
            "Todos"
          ),
          subjects.find(function (s) {
            return s.id === selectedSubject;
          }).temas.map(function (t) {
            return React.createElement(
              "option",
              { key: t.id, value: t.id },
              t.nombre
            );
          })
        )
      ),
      React.createElement(
        "button",
        {
          onClick: handleGenerarExamen,
          className: "bg-primary text-secondary px-4 py-2 rounded"
        },
        "Generar Examen"
      )
    ),
    React.createElement(
      "div",
      { className: "mb-8" },
      React.createElement(
        "h3",
        { className: "font-semibold mb-2 text-primary" },
        "Preguntas del examen:"
      ),
      examenPreguntas.length === 0 ? React.createElement(
        "p",
        null,
        "No hay preguntas seleccionadas."
      ) : examenPreguntas.map(function (p) {
        return React.createElement(PreguntaItem, { key: p.id, pregunta: p });
      })
    ),
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Simulaci\xF3n de Examen"
    ),
    React.createElement(
      "div",
      { className: "border border-primary p-4 rounded" },
      React.createElement(
        "p",
        { className: "mb-2" },
        "Tiempo transcurrido: ",
        tiempo,
        " segundos"
      ),
      React.createElement(
        "div",
        { className: "space-x-2" },
        React.createElement(
          "button",
          {
            onClick: startSimulation,
            className: "bg-primary text-secondary px-4 py-2 rounded"
          },
          "Iniciar"
        ),
        React.createElement(
          "button",
          {
            onClick: stopSimulation,
            className: "bg-accent text-secondary px-4 py-2 rounded"
          },
          "Detener"
        )
      )
    )
  );
}

/********************************************************
 * DESEMPEÑO
 ********************************************************/
function Desempeno() {
  // Para demo, un mock de datos
  var mockStats = {
    matematicas: { correctas: 10, incorrectas: 2, tiempo: 1200 },
    historia: { correctas: 5, incorrectas: 5, tiempo: 900 }
  };
  var calcPorcentaje = function calcPorcentaje(corr, inc) {
    var total = corr + inc;
    return total > 0 ? (corr / total * 100).toFixed(1) : 0;
  };
  return React.createElement(
    "section",
    { className: "p-8" },
    React.createElement(
      "h2",
      { className: "text-2xl font-bold mb-4" },
      "Desempe\xF1o"
    ),
    React.createElement(
      "p",
      null,
      React.createElement(
        "em",
        null,
        "(Esta secci\xF3n puede ampliarse con datos reales y gr\xE1ficos.)"
      )
    ),
    React.createElement(
      "div",
      { className: "mt-4" },
      Object.keys(mockStats).map(function (asig, i) {
        var stats = mockStats[asig];
        var correctas = stats.correctas,
            incorrectas = stats.incorrectas,
            tiempo = stats.tiempo;
        return React.createElement(
          "div",
          { key: i, className: "border p-4 mb-4 rounded" },
          React.createElement(
            "h3",
            { className: "text-xl font-semibold mb-2" },
            asig
          ),
          React.createElement(
            "p",
            null,
            "Aciertos: ",
            correctas
          ),
          React.createElement(
            "p",
            null,
            "Errores: ",
            incorrectas
          ),
          React.createElement(
            "p",
            null,
            "Porcentaje: ",
            calcPorcentaje(correctas, incorrectas),
            "%"
          ),
          React.createElement(
            "p",
            null,
            "Tiempo invertido: ",
            tiempo,
            " segundos"
          )
        );
      })
    )
  );
}

/********************************************************
 * RENDERIZAR LA APLICACIÓN
 ********************************************************/
var rootElement = null;
document.addEventListener("DOMContentLoaded", function() {
  rootElement = document.getElementById("root");
  ReactDOM.createRoot(rootElement).render(
    React.createElement(
      React.StrictMode,
      null,
      React.createElement(
        GlobalProvider,
        null,
        React.createElement(App, null)
      )
    )
  );
});
  </script>

  <style>
    /* Estilos para el flip en Flashcards */
    .perspective {
      perspective: 1000px;
    }
    .rotate-y-180 {
      transform: rotateY(180deg);
    }
    .backface-hidden {
      backface-visibility: hidden;
    }
  </style>
</head>
<body class="bg-secondary text-primary">
  <div id="root"></div>
</body>
</html>
